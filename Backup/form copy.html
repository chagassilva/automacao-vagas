<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Candidatura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        :root {
            --primary-color: #8b5cf6;
            --bg-dark: #121212;
            --input-bg: #1e1e1e;
            --text-light: #e5e7eb;
        }
        
        body {
            background-color: var(--bg-dark);
            font-family: 'Inter', sans-serif;
        }
        
        .custom-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-3xl bg-[#1a1a1a] rounded-xl shadow-lg overflow-hidden">
        <!-- Header -->
        <div class="p-8 text-center border-b border-gray-800">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-purple-600 rounded-full mb-4">
                <i class="fas fa-code text-white text-xl"></i>
            </div>
            <h1 class="text-3xl font-bold text-purple-400">Formulário de Candidatura</h1>
            <p class="text-gray-300 mt-2">Preencha seus dados para se candidatar à vaga</p>
        </div>

        <!-- Form -->
        <form id="candidatura-form" class="p-8 space-y-6">
            <!-- Nome Field -->
            <div>
                <label for="nome" class="block text-sm font-medium text-gray-300 mb-2">Nome Completo</label>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-user text-gray-500"></i>
                    </div>
                    <input 
                        type="text" 
                        id="nome" 
                        class="w-full pl-10 pr-4 py-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100" 
                        placeholder="Digite seu nome completo"
                        required
                    >
                </div>
            </div>

            <!-- Email & Phone Fields -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-300 mb-2">Email</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-envelope text-gray-500"></i>
                        </div>
                        <input 
                            type="email" 
                            id="email" 
                            class="w-full pl-10 pr-4 py-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100" 
                            placeholder="seu@email.com"
                            required
                        >
                    </div>
                </div>
                <div>
                    <label for="telefone" class="block text-sm font-medium text-gray-300 mb-2">Telefone</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-phone text-gray-500"></i>
                        </div>
                        <input 
                            type="tel" 
                            id="telefone" 
                            class="w-full pl-10 pr-4 py-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100" 
                            placeholder="(11) 99999-9999"
                            required
                        >
                    </div>
                </div>
            </div>

            <!-- Currículo PDF Upload -->
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Currículo (PDF)</label>
                <div class="flex items-center gap-3">
                    <div class="flex-1 relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-file-pdf text-red-500"></i>
                        </div>
                        <input 
                            type="file" 
                            id="curriculo" 
                            accept=".pdf" 
                            class="w-full pl-10 pr-4 py-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100" 
                        >
                    </div>
                    <div class="text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded">
                        Máx. 5MB
                    </div>
                </div>
            </div>

            <!-- Múltiplos Links -->
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Links (Portfólio/GitHub/Social Media)</label>
                <div id="links-container" class="space-y-3">
                    <div class="link-item flex gap-2">
                        <select 
                            class="flex-1 p-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100 custom-select"
                        >
                            <option value="">Selecione o tipo de link</option>
                            <option value="portfolio">Portfólio</option>
                            <option value="github">GitHub</option>
                            <option value="linkedin">LinkedIn</option>
                            <option value="twitter">Twitter</option>
                            <option value="instagram">Instagram</option>
                            <option value="dribbble">Dribbble</option>
                        </select>
                        <input 
                            type="url" 
                            class="flex-1 p-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100" 
                            placeholder="Insira o link aqui..."
                        >
                        <button type="button" class="px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md remove-link">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
                <button 
                    type="button" 
                    id="add-link-btn" 
                    class="mt-3 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition duration-200 flex items-center gap-2"
                >
                    <i class="fas fa-plus"></i>
                    Adicionar outro link
                </button>
            </div>

            <!-- Salary Expectation -->
            <div>
                <label for="salario" class="block text-sm font-medium text-gray-300 mb-2">Pretensão Salarial</label>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-dollar-sign text-gray-500"></i>
                    </div>
                    <input 
                        type="text" 
                        id="salario" 
                        class="w-full pl-10 pr-4 py-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100" 
                        placeholder="R$ 5.000,00"
                        required
                    >
                </div>
            </div>

            <!-- Cargo -->
            <div>
                <label for="cargo" class="block text-sm font-medium text-gray-300 mb-2">Cargo</label>
                <select 
                    id="cargo" 
                    class="w-full p-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100 custom-select"
                    required
                >
                    <option value="">Selecione um cargo</option>
                    <option value="frontend">Desenvolvedor Frontend</option>
                    <option value="backend">Desenvolvedor Backend</option>
                    <option value="fullstack">Desenvolvedor FullStack</option>
                    <option value="designer">Designer UI/UX</option>
                    <option value="devops">DevOps Engineer</option>
                </select>
            </div>

            <!-- Submit Button -->
            <button 
                type="submit" 
                class="w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-md transition duration-200 flex items-center justify-center gap-2"
            >
                <i class="fas fa-paper-plane"></i>
                Enviar Candidatura
            </button>
        </form>
    </div>

    <script>
        // Função para adicionar novo link
        document.getElementById('add-link-btn').addEventListener('click', function() {
            const container = document.getElementById('links-container');
            const newLinkItem = document.createElement('div');
            newLinkItem.className = 'link-item flex gap-2';
            newLinkItem.innerHTML = `
                <select class="flex-1 p-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100 custom-select">
                    <option value="">Selecione o tipo de link</option>
                    <option value="portfolio">Portfólio</option>
                    <option value="github">GitHub</option>
                    <option value="linkedin">LinkedIn</option>
                    <option value="twitter">Twitter</option>
                    <option value="instagram">Instagram</option>
                    <option value="dribbble">Dribbble</option>
                </select>
                <input type="url" class="flex-2 p-3 bg-[#1e1e1e] border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-100" placeholder="Insira o link aqui...">
                <button type="button" class="px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md remove-link">
                    <i class="fas fa-trash-alt"></i>
                </button>
            `;
            container.appendChild(newLinkItem);
            
            // Adicionar evento de remoção ao novo botão
            newLinkItem.querySelector('.remove-link').addEventListener('click', function() {
                container.removeChild(newLinkItem);
            });
        });

        // Eventos de remoção para links existentes
        document.querySelectorAll('.remove-link').forEach(button => {
            button.addEventListener('click', function() {
                this.closest('.link-item').remove();
            });
        });

        // Manipulação do formulário e envio para N8N
        document.getElementById('candidatura-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Coletar todos os dados do formulário
            const formData = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                telefone: document.getElementById('telefone').value,
                salario: document.getElementById('salario').value,
                cargo: document.getElementById('cargo').value,
                links: [],
                curriculo: null
            };
            
            // Coletar links
            const linkItems = document.querySelectorAll('.link-item');
            linkItems.forEach(item => {
                const type = item.querySelector('select').value;
                const url = item.querySelector('input[type="url"]').value;
                if (type && url) {
                    formData.links.push({ type, url });
                }
            });
            
            // Coletar currículo
            const curriculoFile = document.getElementById('curriculo').files[0];
            if (curriculoFile) {
                formData.curriculo = curriculoFile.name; // Salvar apenas o nome do arquivo
            }
            
            try {
                // Simular envio para N8N via fetch
                const response = await fetch('https://n8n.chagassilva.com/webhook-test/form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                if (response.ok) {
                    // Sucesso - mostrar mensagem de confirmação
                    alert('Candidatura enviada com sucesso! Os dados foram processados pelo N8N.');
                    this.reset(); // Limpar o formulário
                } else {
                    throw new Error('Erro ao enviar candidatura');
                }
            } catch (error) {
                console.error('Erro:', error);
                alert('Houve um erro ao enviar sua candidatura. Tente novamente mais tarde.');
            }
        });
    </script>
</body>
</html>